<template name="sinavEkrani">
  {{#unless $and (Template.subscriptionsReady) ($and sinavKagidi sinav)}}

    {{> loading}}

  {{else}}

    <div class="container sinavEkrani">
        <div style="text-align: left; position: absolute; height: 56px; width: 280px; top: 4px; left: 4px;"><a class="dugmeNav testBitti kapat sinaviBitir"></a></div>
        <div style="text-align: right; position: absolute; height: 56px; width: 280px; top: 4px; right: 4px;"><a class="dugmeNav anaEkran ekranKapat geri"></a><a class="dugmeNav yardim"></a></div>
        <div style="position: absolute; top: 55px; left: 145px; width: 142px; text-align: center; font-weight: bold; font-size: 22px;">SORU PUANI</div>
        <div style="position: absolute; top: 103px; left: 145px; width: 142px; text-align: center; font-weight: bold; font-size: 32px;">{{soruPuani}}</div>
        <div style="position: absolute; top: 55px; left: 737px; width: 146px; text-align: center; font-weight: bold; font-size: 22px;">{{#if $eq sinav.tip 'canli'}}SÜRE{{else}}KALAN SÜRE{{/if}}</div>
        <div style="position: absolute; top: {{#if $eq sinav.tip 'canli'}}112{{else}}103{{/if}}px; left: 737px; width: 146px; text-align: center; font-weight: bold; font-size: {{#if $eq sinav.tip 'canli'}}20{{else}}32{{/if}}px; word-spacing: -2px">{{kalanSure}}</div>

        {{#with FS.GetFile "M.FS.Muhur" (foreignField 'Muhurler' sinav.muhur 'gorsel')}}
          <img style="position: absolute; left: 425px; top: 0px" alt="" src="{{url auth=false}}"/>
        {{/with}}

        {{>soruyonerge seciliSoru=seciliSoru topYonerge=190 topMetin=300 left=30}}

        <div id="cozumAlani" class="cozumAlani" style="position: absolute; top: 190px; left: 386px; width: 610px; height: 490px; overflow: hidden; word-wrap: break-word;">

          {{#if renderComponent}}
            {{>Template.dynamic template=soruKomponent.template data=soruKomponent.data}}
          {{/if}}

        </div>

        {{#unless $eq (cevapDogruYanlis sinavKagidi._id seciliSoruIndex) ' cevapDogru'}}
          <a data-trigger="soruYanitla" class="soruYanitla" style="padding-top: 10px; font-size: 16px; left: 900px; bottom: 95px;">yanıtla</a>
        {{/unless}}

        {{>sorucubugu sorular=sinavKagidi.yanitlar sinav=true sinavKagidiId=sinavKagidi._id seciliSoruIndex=seciliSoruIndex}}

    </div>

    {{#if sinavUyari}}
      <div class="cover">
        <div class="sinavUyari" style="padding-top: 40px; text-align: center">
          <h1>Sınavı Bitir</h1>
          <p>Sınavı bitirmek istediğine emin misin? {{#if alistirmaSinavindanHalenAlinabilecekPuan}}Henüz doğru yanıtlamadığın {{alistirmaSinavindanHalenAlinabilecekPuan.adet}} soru var. Bu soruların doğru yanıtlarını vererek {{alistirmaSinavindanHalenAlinabilecekPuan.puan}} puan daha kazanabilirsin. {{else}}{{#if yanitlanmamisSoruAdedi}}Henüz yanıtlamadığın {{yanitlanmamisSoruAdedi}} soru var. {{/if}}{{/if}}Bitirmeyi onaylarsan doğru yanıtların üzerinden puanın hesaplanarak sınav kapanacaktır. Bitirdiğin sınava tekrar giremezsin.</p>
          <p style="margin-top: 24px; text-align: center !important;">
            <a class="kapatmaktanVazgec" style="font-weight: bold; display: inline-block; width: 100px; text-align: center">sınava dön</a>
            <a class="kapatmayiOnayla buyukButon" style="font-weight: bold; display: inline-block;">sınavı bitir</a>
          </p>
        </div>
      </div>
    {{/if}}

    {{#if sinavYardim}}
      {{> sinavEkraniYardim tip=seciliSoru.tip sinavTip=sinav.tip}}
    {{/if}}

    {{#if $and ($eq sinav.tip 'canli') ($neq sinav.canliStatus 'running')}}
        <div class="cover superCover">
          <div class="sinavStatus" style="padding-top: 40px; text-align: center">
            {{#if $eq sinav.canliStatus 'pending'}}
              <h1>Sınav Başlamayı Bekliyor</h1>
              <p>Bu bir canlı sınav ve öğretmen tarafından herkes için aynı anda başlatılmak üzere bekletiliyor. Ekranını kapatma ve öğretmenin talimatlarını bekle. Sınav başlayınca bu uyarı kendiliğinden kapanacak ve soruları yanıtlamaya başlayabileceksin.</p>
            {{/if}}
            {{#if $eq sinav.canliStatus 'paused'}}
              <h1>Sınav Durduruldu</h1>
              <p>Öğretmen sınavı herkes için beklemeye aldı. Ekranını kapatma ve öğretmeninin talimatlarını bekle. Öğretmen sınavı herkes için aynı anda tekrar başlattığında bu uyarı kendiliğinden kapanacak ve sınava kaldığın yerden devam edebileceksin.</p>
            {{/if}}
            {{#if $eq sinav.canliStatus 'completed'}}
              <h1>Sınav Bitti</h1>
              <p>Sınav öğretmen tarafından bitirildi. Bu ekran 1 dakika içinde kendiliğinden kapanacak. Şimdi çıkmak istersen sınavı bitir düğmesine {{#if $eq deviceType 'desktop'}}tıklayabilirsin{{else}}dokunabilirsin{{/if}}.</p>
              <p style="margin-top: 24px; text-align: center !important;">
                <a class="kapatmayiOnayla buyukButon" style="font-weight: bold; display: inline-block;">sınavı bitir</a>
              </p>
          {{/if}}
          </div>
        </div>
      {{/if}}

  {{/unless}}
</template>

<template name="sinavEkraniYardim">
  <div class="cover">
    <div class="sinavYardim">
      <p>
        Bu ekranda mühürü kazanmak için çözmen gereken soruyu, soru puanını ve sınavı tamamlamak için kalan süreyi görüyorsun. Soru seçimini soru numarası kutucuklarına {{#if $eq deviceType 'desktop'}}tıklayarak{{else}}dokunarak{{/if}} yapabilirsin.
      </p>
      <p>
        Yanıtını verdiğinde <img src="/assets/_bilesen/yardim-sinav-yanitla-buton.png" title="" alt="" class="yardimImg"> düğmesine {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}. Yanıtladığın soruların numaraları <img src="/assets/_bilesen/cevapVerildi.png" title="" alt="" class="yardimImg"> biçiminde işaretlenir. İstediğin soruya geri dönüp yanıtını değiştirebilirsin. Bir soruyu tekrar geri dönmek üzere işaretlemek istersen soru kutucuğuna çift {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}. İşareti kaldırmak için tekrar çift {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}.
      </p>
      <p>
        Sınavı tamamladığında <img src="/assets/_bilesen/dugme-nav/testbitti.png" title="" alt="" class="yardimImg"> düğmesine {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}. <strong>Dikkat!</strong> Sınavı bu düğme ile bitirdikten sonra tekrar geri dönemezsin. Sınavına <img src="/assets/_bilesen/dugme-nav/anasayfa.png" title="" alt="" class="yardimImg"> düğmesine {{#if $eq deviceType 'desktop'}}tıklayarak{{else}}dokunarak{{/if}} ara verebilirsin ama sınav süren geri saymaya devam edecektir.
      </p>
      {{#if $eq sinavTip 'alistirma'}}
        <p>
          Bu bir Alıştırma Testi; dolayısıyla, soruyu yanlış çözdüğünde <img src="/assets/_bilesen/cevapYanlis.png" title="" alt="" class="yardimImg"> doğru çözdüğünde ise <img src="/assets/_bilesen/cevapDogru.png" title="" alt="" class="yardimImg"> şeklinde işaretlenir. <strong>Dikkat!</strong> Yanlış yanıtladığın bir soruyu tekrar çözebilirsin ama alıştırma testinde her yanlış yanıtında sorudan kazanabileceğin puan azalacaktır.
        </p>
      {{/if}}
      <p>
        {{#if $eq tip 'dogruYanlis'}}
          Bu soruda yanıtını Doğru ya da Yanlış kutucuğunu seçerek verebilirsin.
        {{/if}}

        {{#if $eq tip 'coktanTekSecmeli'}}
          Bu soruda yalnızca bir seçenek doğrudur. Doğru yanıtı bulup {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}. Yanıtını değiştirmek istersen başka bir seçeneğe {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}.
        {{/if}}

        {{#if $eq tip 'coktanCokSecmeli'}}
          Bu soruda birden fazla seçenek doğrudur. Doğru seçenekleri bulup {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}. Daha önce seçtiğin bir seçenekten vazgeçersen tekrar üzerine {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}.
        {{/if}}

        {{#if $eq tip 'siralama'}}
          Bu soruda verilen kutucukları taşıyarak doğru sıraya koy.
        {{/if}}

        {{#if $eq tip 'eslestirme'}}
          Bu soruda soldaki kutucuklarla sağdakileri yönergeye uyacak şekilde üzerlerine {{#if $eq deviceType 'desktop'}}tıklayarak{{else}}dokunarak{{/if}} eşle. Eşlenen seçenekler arasına bir çizgi çizilecektir. Seçimini değiştirmek istersen eşlenen kutucuklardan herhangi birisine {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}. Çizgi kaybolur ve yeniden bir eşleme yapabilirsin.
        {{/if}}

        {{#if $eq tip 'boslukDoldurma'}}
          Bu soruda verilen boşluklara {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}} ve doğru ifadeleri yaz.
        {{/if}}
      </p>
      <p style="margin-top: 4px; font-size: 80%; font-style: italic">Bu pencereyi kapatmak için lütfen buraya {{#if $eq deviceType 'desktop'}}tıkla{{else}}dokun{{/if}}.</p>
    </div>
  </div>
</template>
